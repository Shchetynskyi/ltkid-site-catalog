# Ключові рішення (SSOT)

Цей документ є **єдиним джерелом продуктових і системних рішень**.
Будь-яка логіка, яка впливає на UX, дані або поведінку сайту,
МУСИТЬ бути зафіксована тут.

---

## 1. Catalog v2 — Source of Truth

**Status:** ACTIVE

- Google Sheets (`CATALOG_V2`) є **єдиним джерелом правди** для каталогу.
- Будь-які зміни структури даних:
  - тільки після усвідомленого рішення,
  - з фіксацією в цьому документі.
- Сайт працює **виключно на read-only даних** з SSOT.

---

## 2. Діоптрії

**Status:** FIXED

**Source of truth:**
- колонка `Наявність діоптрій виробника`
- тільки конкретні значення (не діапазони)

**Правила:**
- діапазони (MIN–MAX) є похідними
- діапазони НЕ є джерелом даних
- UI не має права “вгадувати” діоптрії

---

## 3. Категоризація

**Status:** FIXED

- Категорія **НЕ зберігається** в таблиці.
- Категорія визначається **логікою фронтенду**
  на основі атрибутів моделі.
- У таблиці немає поля `Category`.

---

## 4. Try-On / AI

**Status:** INACTIVE

- Try-On та AI Preview:
  - не інтегровані
  - існують лише як CTA
- Не мають:
  - бізнес-логіки
  - переходів
  - впливу на каталог або замовлення

---

## 5. Глобальні заборони

**Status:** ACTIVE

ЗАБОРОНЕНО:
- додавати нові UX-елементи без рішення в SSOT
- змінювати тексти кнопок
- інтегрувати оплату
- додавати бізнес-логіку без фіксації в `DECISIONS.md`

---

## 6. Site price — загальне рішення

**Status:** FIXED (immutable)

- Канонічна ціна для клієнтського UI **НЕ є** `Price`.
- `Price` — внутрішня / закупочна ціна виробника.
- `PriceIndex` — технічний індекс.
- ЖОДНЕ з цих полів не використовується напряму в UI.

Будь-які зміни ціни на сайті можливі **тільки через це рішення**.

---

## 7. [P0] SitePriceUAH — Derived column pattern (Google Sheets)

**Status:** FIXED (immutable)

**Призначення:**
- `SitePriceUAH` — похідна колонка ціни для сайту.

**Джерела:**
- `PriceIndex` — source of truth
- `PriceMap` — відповідність `PriceIndex → PriceUAH`

**Правила:**
- Колонка `SitePriceUAH`:
  - додається ТІЛЬКИ в кінець таблиці `CATALOG_V2`
  - не редагується вручну
  - формується виключно формулою

**Канонічний патерн формули:**
